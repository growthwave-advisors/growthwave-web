---
// Header.astro - Brand-aware header component
// Uses inline styles for colors to ensure Tailwind v4 compatibility
interface Props {
  brand: 'properties' | 'capital' | 'advisors';
  currentPath?: string;
}

const { brand, currentPath = '' } = Astro.props;

// Brand color hex codes (inline styles for guaranteed display)
const brandColors = {
  properties: '#FF6B4A',
  capital: '#7C3AED',
  advisors: '#265077',
};

const accentColor = brandColors[brand];

// Navigation configuration
const navLinks = {
  properties: [
    { label: 'About', href: '/properties/about' },
    { label: 'Investment Approach', href: '/properties/approach' },
    { label: 'Portfolio', href: '/properties/portfolio' },
    { label: 'Contact', href: '/properties/contact' },
  ],
  capital: [
    { label: 'About', href: '/capital/about' },
    { label: 'Services', href: '/capital/services' },
    { label: 'Contact', href: '/capital/contact' },
  ],
  advisors: [
    { label: 'About', href: '/advisors/about' },
    { label: 'Our Companies', href: '/advisors/companies' },
    { label: 'Investor Success Flywheelâ„¢', href: '/advisors/flywheel' },
    { label: 'Contact', href: '/advisors/contact' },
  ],
};

const links = navLinks[brand];
const brandName = brand.charAt(0).toUpperCase() + brand.slice(1);
---

<header style="background-color: #ffffff; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); position: sticky; top: 0; z-index: 50;">
  <nav class="container-custom">
    <div style="display: flex; align-items: center; justify-content: space-between; padding-top: 1rem; padding-bottom: 1rem;">
      <!-- Logo -->
      <a 
        href={`/${brand}`} 
        style="display: flex; flex-direction: column; transition: opacity 200ms;"
        onmouseover="this.style.opacity='0.8'"
        onmouseout="this.style.opacity='1'"
      >
        <span style="font-size: 1.25rem; font-weight: 700; color: #265077; line-height: 1.2; font-family: 'Outfit', sans-serif;">
          GrowthWave
        </span>
        <span style={`font-size: 0.75rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.1em; color: ${accentColor}; line-height: 1.2; font-family: 'Outfit', sans-serif;`}>
          {brandName}
        </span>
      </a>

      <!-- Desktop Navigation -->
      <ul style="display: none; align-items: center; gap: 2rem;" class="md:flex">
        {links.map((link) => {
          const isActive = currentPath === link.href;
          return (
            <li>
              <a
                href={link.href}
                style={
                  isActive
                    ? `font-weight: 600; font-size: 1rem; color: ${accentColor}; border-bottom: 2px solid ${accentColor}; padding-bottom: 0.25rem; transition: all 200ms; font-family: 'Outfit', sans-serif;`
                    : 'font-weight: 500; font-size: 1rem; color: #595959; transition: all 200ms; font-family: \'Outfit\', sans-serif;'
                }
                onmouseover={!isActive ? "this.style.color='#022140'" : ''}
                onmouseout={!isActive ? "this.style.color='#595959'" : ''}
              >
                {link.label}
              </a>
            </li>
          );
        })}
      </ul>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        style="display: block; padding: 0.5rem; color: #595959; background: none; border: none; cursor: pointer;"
        class="md:hidden"
        aria-label="Toggle menu"
        aria-expanded="false"
      >
        <svg style="width: 1.5rem; height: 1.5rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" style="display: none; padding-bottom: 1rem;" class="md:hidden">
      <ul style="display: flex; flex-direction: column; gap: 0.5rem;">
        {links.map((link) => (
          <li>
            <a
              href={link.href}
              style="display: block; padding: 0.5rem 1rem; border-radius: 0.5rem; color: #595959; transition: background-color 200ms; font-family: 'Outfit', sans-serif;"
              onmouseover="this.style.backgroundColor='#f3f4f6'"
              onmouseout="this.style.backgroundColor='transparent'"
            >
              {link.label}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </nav>
</header>

<script>
  const button = document.getElementById('mobile-menu-button');
  const menu = document.getElementById('mobile-menu');

  button?.addEventListener('click', () => {
    const isExpanded = button.getAttribute('aria-expanded') === 'true';
    const newState = !isExpanded;
    
    button.setAttribute('aria-expanded', String(newState));
    
    if (menu) {
      menu.style.display = newState ? 'block' : 'none';
    }
  });
</script>
